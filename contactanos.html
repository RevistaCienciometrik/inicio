<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contáctanos - Revista Cienciometrik</title>
    <link rel="stylesheet" href="CSS/styles.css">
    <!-- <link rel="stylesheet" href="CSS/metricas.css"> -->
</head>
<body>
    <mi-header id="top"></mi-header>
    <div class="container">
        <main class="main-content">

            <section class="section contact-info-section">
                <h2 id="contactanos">Contáctanos</h2>
                <p>Puedes encontrarnos aquí:</p>
                <div class="contact-details">
                    <div class="contact-item">
                        <i class="fas fa-envelope-open-text icon-large"></i>
                        <h3>Correo Electrónico</h3>
                        <p><a href="mailto:cienciometrik@gmail.com">cienciometrik@gmail.com</a></p>
                        <p>¡Esperamos tu email!</p>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-phone-alt icon-large"></i>
                        <h3>Teléfono</h3>
                        <p>Hugo Alexander Semanate hsemanate@sena.edu.co <br> (Coordinador Revista Cienciométrik)</p>
                        <p id="tel"><a href="tel:+573125271993">+57 312-5271993</a></p>
                        <p>Llámanos en horario de oficina.</p>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-map-marker-alt icon-large"></i>
                        <h3>Nuestra Ubicación</h3>
                            <p><a href="https://maps.app.goo.gl/9CVLQCo7UeGHEfKa9">Google Maps</a></p>
                        <p>Calle 51 No. 57-70. Torre Sur. Piso 4. Medellín, Antioquia, Colombia.</p>
                    </div>
                </div>
                <div class="social-media">
                    <h3>¡Síguenos en redes!</h3>
                    <p>Mantente al tanto de nuestras últimas publicaciones y novedades:</p>
                    <div class="social-icons">
                        <a href="https://www.facebook.com/profile.php?id=61576106693485" class="social-icon-link"><i class="facebook">F</i></a>
                        <a href="https://www.linkedin.com/in/revista-cienciometrik-b7a5ab363/" class="social-icon-link"><i class="linkedin">L</i></a>
                        <a href="https://www.instagram.com/revistacienciometrik/" class="social-icon-link"><i class="instagram">iG</i></a>
                        <a href="https://www.youtube.com/@revistacienciometrik" class="social-icon-link"><i class="Youtube">Yt</i></a>
                    </div>
                </div>
            </section>
            <section class="section contact-form-section">
                <h2 id="mensaje">Envíanos tu mensaje</h2>
                <p>Completa este formulario y nos pondremos en contacto contigo lo antes posible. <br> ¡Tu opinión y tus ideas son valiosas para nosotros!</p>
                <form id="formulario-contacto" class="modern-form">
                    <div class="form-group">
                        <label for="nombre"><i class="fas fa-user icon"></i> Tu Nombre:</label>
                        <input type="text" id="nombre" name="nombre" placeholder="Ej: María Rodríguez" required>
                    </div>
                    <div class="form-group">
                        <label for="email"><i class="fas fa-envelope icon"></i> Tu Correo Electrónico:</label>
                        <input type="email" id="email" name="email" placeholder="Ej: tu.email@example.com" required>
                    </div>
                    <div class="form-group">
                        <label for="tipo-consulta"><i class="fas fa-tag icon"></i> Tipo de Consulta:</label>
                        <select id="tipo-consulta" name="tipo-consulta" required>
                            <option value="">Selecciona una opción</option>
                            <option value="consulta">Consulta general</option>
                            <option value="colaboracion">Propuesta de colaboración</option>
                            <option value="sugerencia">Sugerencia</option>
                            <option value="soporte">Soporte técnico</option>
                            <option value="otro">Otro</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="asunto"><i class="fas fa-lightbulb icon"></i> Asunto:</label>
                        <input type="text" id="asunto" name="asunto" placeholder="Ej: Duda sobre una publicación" required>
                    </div>
                    <div class="form-group">
                        <label for="mensaje-input"><i class="fas fa-comment-dots icon"></i> Tu Mensaje:</label>
                        <textarea id="mensaje-input" name="mensaje" rows="6" placeholder="Escribe tu mensaje aquí..." required></textarea>
                    </div>
                    <button type="submit" class="submit-button">
                        <i class="fas fa-paper-plane"></i> Enviar Mensaje
                    </button>
                </form>
                <div id="mensaje-contacto" class="mensaje"></div>
            </section>
        </main>
    <metricas-panel></metricas-panel>     
    </div>
    
    <mi-footer id="bottom"></mi-footer>
    
    <!-- Scripts -->
    <script src="Objects/header.js"></script>
    <script src="Objects/container.js"></script>
    <script src="Objects/footer.js"></script>
    <script src="Objects/script.js"></script>
    <script src="js/panelmetricas.js"></script>
    <script src="js/download_tracker.js"></script>
    
    <script type="module">
        // Importa las funciones que necesitas del SDK de Firebase.
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        // Importa las funciones específicas para Firestore.
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
        
        // Aquí está la configuración de tu proyecto de Firebase.
        const firebaseConfig = {
            apiKey: "AIzaSyAuRQC65O5zlkNbcnp1srZkQpjmD82TVco",
            authDomain: "cienciometrik-3c8e7.firebaseapp.com",
            projectId: "cienciometrik-3c8e7",
            storageBucket: "cienciometrik-3c8e7.firebasestorage.app",
            messagingSenderId: "60232446009",
            appId: "1:60232446009:web:1ce1cbb0437018d62f9de8"
        };
        
        // Inicializa Firebase.
        const app = initializeApp(firebaseConfig);
        // Obtén una referencia a la base de datos de Firestore.
        const db = getFirestore(app);
        
        // Esperar a que el DOM esté completamente cargado
        document.addEventListener('DOMContentLoaded', () => {
            // Selecciona el formulario de contacto.
            const formulario = document.getElementById('formulario-contacto');
            // Selecciona el div donde mostraremos el mensaje de éxito o error.
            const mensajeContacto = document.getElementById('mensaje-contacto');
            
            // Verificar que el formulario existe
            if (!formulario) {
                console.error("No se encontró el formulario de contacto");
                return;
            }
            
            // Escucha el evento de envío del formulario.
            formulario.addEventListener('submit', async (e) => {
                // Evita que la página se recargue.
                e.preventDefault(); 
                
                // Obtiene los valores de los campos del formulario.
                const nombre = document.getElementById('nombre').value;
                const email = document.getElementById('email').value;
                const tipoConsulta = document.getElementById('tipo-consulta').value;
                const asunto = document.getElementById('asunto').value;
                const mensaje = document.getElementById('mensaje-input').value;
                
                // Antes de intentar enviar, oculta cualquier mensaje anterior.
                mensajeContacto.textContent = '';
                mensajeContacto.style.color = 'initial'; // Reinicia el color
                
                try {
                    // Envía la información a Firebase Firestore.
                    await addDoc(collection(db, "mensajesContacto"), { 
                        nombre: nombre,
                        email: email,
                        tipoConsulta: tipoConsulta,
                        asunto: asunto,
                        mensaje: mensaje,
                        fecha: new Date() 
                    });
                    
                    // Si todo sale bien, muestra el nuevo mensaje de confirmación.
                    mensajeContacto.textContent = 'Tu mensaje de contacto ha sido enviado. Pronto recibirás respuesta en el correo electrónico registrado en el formulario. Att: Equipo Cienciométrik - Sena.';
                    mensajeContacto.style.color = 'green'; // Mensaje en verde para éxito
                    formulario.reset(); // Limpia los campos del formulario.
                    
                    // Opcional: Si quieres una "ventana emergente" de alerta real (menos bonita, pero efectiva):
                    // alert('Tu mensaje de contacto ha sido enviado. Pronto recibirás respuesta en el correo electrónico registrado en el formulario. Att: Equipo Cienciométrik - Sena.');
                } catch (error) {
                    // Si hay un error, muestra un mensaje de error.
                    console.error("Error al enviar el mensaje: ", error); 
                    mensajeContacto.textContent = 'Hubo un error al enviar tu mensaje. Por favor, inténtalo de nuevo.';
                    mensajeContacto.style.color = 'red'; // Mensaje en rojo para error.
                    
                    // Opcional: Si quiero una "ventana emergente" de alerta real para errores:
                    // alert('Hubo un error al enviar tu mensaje. Por favor, inténtalo de nuevo.');
                }
            });
        });
    </script>
</body>
</html>